local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local Window = Rayfield:CreateWindow({
    Name = "Rimuru OP Hub - Arise Crossover",
    LoadingTitle = "Predator Mode Activated",
    LoadingSubtitle = "by Rimuru ðŸ˜ˆ",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "AriseCrossoverHub",
        FileName = "Config"
    }
})

-- Auto Farm Tab
local FarmTab = Window:CreateTab("Auto Farm", 4483362458)

local npcList = {"No NPCs Found"}
local npcMap = {}
local selectedNPC = ""
local autofarm = false

-- Create Dropdown for NPC Selection
local npcDropdown = FarmTab:CreateDropdown({
    Name = "Select NPC",
    Options = npcList,
    CurrentOption = npcList[1],
    Flag = "NPCDropdown",
    Callback = function(option)
        selectedNPC = option
    end,
})

-- Function to scan NPCs dynamically
local function scanNPCs()
    local npcRoot = workspace:FindFirstChild("__Main") and workspace.__Main:FindFirstChild("__Enemies") and workspace.__Main.__Enemies:FindFirstChild("Client")
    if not npcRoot then
        warn("[RimuruHub] No NPC root found.")
        return
    end

    npcList = {}
    npcMap = {}

    for _, npc in pairs(npcRoot:GetChildren()) do
        local displayName = npc.Name
        if npc:FindFirstChild("Humanoid") and npc.Humanoid.DisplayName then
            displayName = npc.Humanoid.DisplayName
        elseif npc:FindFirstChild("Head") and npc.Head:FindFirstChild("NameTag") then
            displayName = npc.Head.NameTag.Text
        end

        npcList[#npcList+1] = displayName
        npcMap[displayName] = npc
    end

    if #npcList == 0 then
        table.insert(npcList, "No NPCs Found")
    end

    npcDropdown:UpdateOptions(npcList)
    selectedNPC = npcList[1] or ""
end

-- Refresh NPC List Button
FarmTab:CreateButton({
    Name = "Refresh NPC List",
    Callback = function()
        scanNPCs()
    end
})

-- Toggle Auto Farm
FarmTab:CreateToggle({
    Name = "Auto Farm NPC",
    CurrentValue = false,
    Flag = "AutoFarmToggle",
    Callback = function(Value)
        autofarm = Value
        LocalPlayer:SetAttribute("AutoClick", Value)

        if autofarm then
            task.spawn(function()
                while autofarm do
                    if selectedNPC == "" or selectedNPC == "No NPCs Found" then
                        task.wait(1)
                        continue
                    end

                    local npc = npcMap[selectedNPC]
                    local char = LocalPlayer.Character
                    if npc and npc:FindFirstChild("Hitbox") and char and char:FindFirstChild("HumanoidRootPart") then
                        char.HumanoidRootPart.CFrame = CFrame.new(npc.Hitbox.Position + Vector3.new(0, 3, 0))
                        LocalPlayer:SetAttribute("AutoClick", true)
                    else
                        LocalPlayer:SetAttribute("AutoClick", false)
                    end
                    task.wait(0.2)
                end
            end)
        end
    end,
})

-- Auto Boost Tab
local BoostTab = Window:CreateTab("Auto Boosts", 4483362458)
local boosts = {
    "Shadow", "SwordDamage", "Drops", "Gems", "Coins", "Exp", "AriseTry", "EnemyKill"
}

for _, boostName in pairs(boosts) do
    BoostTab:CreateButton({
        Name = "Activate "..boostName.." Boost",
        Callback = function()
            local success, err = pcall(function()
                game:GetService("ReplicatedStorage").Remotes.ActivateBoost:InvokeServer(boostName)
            end)
            if success then
                print("[Boost] Activated:", boostName)
            else
                warn("[Boost] Failed:", boostName, err)
            end
        end
    })
end

-- Initial NPC scan
task.wait(3)
scanNPCs()
